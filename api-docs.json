{"openapi":"3.0.1","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"paths":{"/products/{productId}":{"put":{"tags":["product-controller"],"summary":"Update product","description":"Update a product by ID","operationId":"updateProduct","parameters":[{"name":"productId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"adminId","in":"query","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Product"}}},"required":true},"responses":{"200":{"description":"Product updated","content":{"*/*":{"schema":{"type":"object"}}}},"404":{"description":"Product not found","content":{"*/*":{"schema":{"type":"object"}}}},"403":{"description":"Forbidden","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/category/{categoryName}":{"put":{"tags":["category-controller"],"summary":"Update category by name","description":"Update category by name in the database","operationId":"updateCategoryByName","parameters":[{"name":"categoryName","in":"path","required":true,"schema":{"type":"string"}},{"name":"adminId","in":"query","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Category"}}},"required":true},"responses":{"200":{"description":"Category updated","content":{"*/*":{"schema":{"type":"object"}}}},"403":{"description":"Forbidden","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/users/register":{"post":{"tags":["user-controller"],"summary":"Register a new user","description":"Register a new user","operationId":"register","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}},"required":true},"responses":{"201":{"description":"User registered","content":{"*/*":{"schema":{"$ref":"#/components/schemas/User"}}}},"400":{"description":"Invalid input","content":{"*/*":{"schema":{"$ref":"#/components/schemas/User"}}}}}}},"/users/login":{"post":{"tags":["user-controller"],"summary":"Login","description":"Login","operationId":"login","parameters":[{"name":"username","in":"query","required":true,"schema":{"type":"string"}},{"name":"password","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Login successful","content":{"*/*":{"schema":{"type":"string"}}}},"401":{"description":"Invalid username or password","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/reviews":{"get":{"tags":["review-controller"],"summary":"Get all reviews","description":"Get all reviews","operationId":"getAllReviews","responses":{"200":{"description":"Reviews found","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Review"}}}}}}},"post":{"tags":["review-controller"],"summary":"Create a new review","description":"Create a new review for a product","operationId":"createReview","parameters":[{"name":"username","in":"query","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewRequest"}}},"required":true},"responses":{"200":{"description":"Review created","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Review"}}}},"400":{"description":"User not ordered the product or review text is empty","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Review"}}}},"404":{"description":"Product or user not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Review"}}}}}}},"/ratings":{"post":{"tags":["rating-controller"],"summary":"Create a new rating","description":"Create a new rating for a product","operationId":"createRating","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RatingRequest"}}},"required":true},"responses":{"200":{"description":"Rating created","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Rating"}}}},"400":{"description":"User not ordered this product","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Rating"}}}},"404":{"description":"User or product not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Rating"}}}}}}},"/products":{"post":{"tags":["product-controller"],"summary":"Add a new product","description":"Add a new product to the database","operationId":"addProduct","parameters":[{"name":"adminId","in":"query","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"categoryId","in":"query","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Product"}}},"required":true},"responses":{"200":{"description":"Product added","content":{"*/*":{"schema":{"type":"object"}}}},"400":{"description":"Category not found","content":{"*/*":{"schema":{"type":"object"}}}},"403":{"description":"Forbidden for non-admin users","content":{"*/*":{"schema":{"type":"object"}}}}}},"delete":{"tags":["product-controller"],"summary":"Delete product","description":"Delete a product by ID","operationId":"deleteProduct","parameters":[{"name":"productId","in":"query","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"adminId","in":"query","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Product deleted","content":{"*/*":{"schema":{"type":"object"}}}},"404":{"description":"Product not found","content":{"*/*":{"schema":{"type":"object"}}}},"403":{"description":"Forbidden for non-admin users","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/order/checkout":{"post":{"tags":["order-controller"],"summary":"Checkout","description":"Checkout the cart items and place an order","operationId":"checkout","parameters":[{"name":"username","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Order placed","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Order"}}}},"400":{"description":"There are no items in the cart","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Order"}}}},"404":{"description":"User not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Order"}}}}}}},"/order/add":{"post":{"tags":["order-controller"],"summary":"Add product to cart","description":"Add a product to the cart by product ID and quantity","operationId":"addToCart","parameters":[{"name":"productId","in":"query","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"quantity","in":"query","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"200":{"description":"Product added to cart","content":{"*/*":{"schema":{"type":"string"}}}},"404":{"description":"Product not found","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/category":{"post":{"tags":["category-controller"],"summary":"Add a new category","description":"Add a new category to the database","operationId":"addCategory","parameters":[{"name":"adminId","in":"query","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Category"}}},"required":true},"responses":{"200":{"description":"Category added","content":{"*/*":{"schema":{"type":"object"}}}},"403":{"description":"Forbidden","content":{"*/*":{"schema":{"type":"object"}}}}}},"delete":{"tags":["category-controller"],"summary":"Delete category","description":"Delete category by ID","operationId":"deleteCategory","parameters":[{"name":"adminId","in":"query","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"categoryId","in":"query","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Category deleted","content":{"*/*":{"schema":{"type":"object"}}}},"404":{"description":"Category not found","content":{"*/*":{"schema":{"type":"object"}}}},"403":{"description":"Forbidden, the user is not an admin","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/users/{userId}":{"get":{"tags":["user-controller"],"summary":"Get user by ID","description":"Get a user by its ID","operationId":"getAllUsers","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"adminId","in":"query","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"User found","content":{"*/*":{"schema":{"type":"object"}}}},"403":{"description":"Forbidden: Not an admin","content":{"*/*":{"schema":{"type":"object"}}}},"404":{"description":"User not found","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/users/all":{"get":{"tags":["user-controller"],"summary":"Get all users","description":"Get all users","operationId":"getAllUsers_1","parameters":[{"name":"adminId","in":"query","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Users found","content":{"*/*":{"schema":{"type":"object"}}}},"403":{"description":"Forbidden: Not an admin","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/reviews/product/{productId}":{"get":{"tags":["review-controller"],"summary":"Get reviews by product ID","description":"Get all reviews for a product by product ID","operationId":"getReviewsByProductId","parameters":[{"name":"productId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Reviews found","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Review"}}}}},"404":{"description":"No reviews found for product","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Review"}}}}}}}},"/ratings/product/{productId}":{"get":{"tags":["rating-controller"],"summary":"Get ratings by product ID","description":"Get all ratings for a product by product ID","operationId":"getRatingsByProductId","parameters":[{"name":"productId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Ratings found","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Rating"}}}}},"404":{"description":"Product not found","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Rating"}}}}}}}},"/ratings/all":{"get":{"tags":["rating-controller"],"summary":"Get all ratings","description":"Get all ratings","operationId":"allRatings","responses":{"200":{"description":"Ratings found","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Rating"}}}}},"404":{"description":"No ratings found","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Rating"}}}}}}}},"/products/search":{"get":{"tags":["product-controller"],"summary":"Search products","description":"Search products by keyword","operationId":"searchProducts","parameters":[{"name":"keyword","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Search results found","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Product"}}}}}}}},"/products/product/{id}":{"get":{"tags":["product-controller"],"summary":"Get product by ID","description":"Get a product by its ID","operationId":"getProductById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Product found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Product"}}}},"404":{"description":"Product not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Product"}}}}}}},"/products/filter":{"get":{"tags":["product-controller"],"summary":"Filter products by category","description":"Filter products by category name","operationId":"filterProductsByType","parameters":[{"name":"categoryName","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Products found","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Product"}}}}},"404":{"description":"No such category found","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Product"}}}}}}}},"/products/all":{"get":{"tags":["product-controller"],"summary":"Get all products","description":"Get all products from the database","operationId":"getAllProducts","responses":{"200":{"description":"Products found","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Product"}}}}}}}},"/order/items":{"get":{"tags":["order-controller"],"summary":"Get cart items","description":"Get the items in the cart","operationId":"getOrderItems","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrderItem"}}}}}}}},"/order/history":{"get":{"tags":["order-controller"],"summary":"Get order history","description":"Get order history for a user by username","operationId":"getOrderHistory","parameters":[{"name":"username","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Orders found","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Order"}}}}},"404":{"description":"User not found","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Order"}}}}}}}},"/category/all":{"get":{"tags":["category-controller"],"summary":"Get all categories","description":"Get all categories from the database","operationId":"getAllCategories","parameters":[{"name":"adminId","in":"query","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Categories found","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Category"}}}}},"403":{"description":"Forbidden","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Category"}}}}}}}},"/reviews/{reviewId}":{"delete":{"tags":["review-controller"],"summary":"Delete a review","description":"Delete a review by review ID","operationId":"deleteReview","parameters":[{"name":"reviewId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Review deleted","content":{"*/*":{"schema":{"type":"string"}}}},"404":{"description":"Review not found","content":{"*/*":{"schema":{"type":"string"}}}}}}}},"components":{"schemas":{"Category":{"required":["categoryName"],"type":"object","properties":{"categoryId":{"type":"integer","format":"int64"},"categoryName":{"maxLength":50,"minLength":2,"type":"string"}}},"Product":{"required":["description","productName"],"type":"object","properties":{"productId":{"type":"integer","format":"int64"},"productName":{"type":"string"},"description":{"type":"string"},"price":{"type":"number"},"quantity":{"type":"integer","format":"int32"},"category":{"$ref":"#/components/schemas/Category"},"image":{"pattern":"^(http|https)://.*$","type":"string"}}},"User":{"required":["fullName","password","phone","username"],"type":"object","properties":{"userId":{"type":"integer","format":"int64"},"username":{"type":"string"},"password":{"type":"string"},"fullName":{"type":"string"},"email":{"pattern":"^[A-Za-z0-9+_.-]+@[A-Za-z0-9.-]+$","type":"string"},"phone":{"type":"string"},"isAdmin":{"type":"boolean"}}},"ReviewRequest":{"required":["productId","reviewText"],"type":"object","properties":{"reviewText":{"type":"string"},"productId":{"type":"integer","format":"int64"}}},"Review":{"type":"object","properties":{"reviewId":{"type":"integer","format":"int64"},"product":{"$ref":"#/components/schemas/Product"},"user":{"$ref":"#/components/schemas/User"},"reviewText":{"type":"string"},"createdAt":{"type":"string","format":"date-time"}}},"RatingRequest":{"required":["productId","username"],"type":"object","properties":{"ratingValue":{"maximum":5,"minimum":1,"type":"integer","format":"int32"},"productId":{"type":"integer","format":"int64"},"username":{"type":"string"}}},"Rating":{"type":"object","properties":{"ratingId":{"type":"integer","format":"int64"},"user":{"$ref":"#/components/schemas/User"},"product":{"$ref":"#/components/schemas/Product"},"rating":{"type":"integer","format":"int32"}}},"Order":{"required":["orderDate","user"],"type":"object","properties":{"orderId":{"type":"integer","format":"int64"},"user":{"$ref":"#/components/schemas/User"},"orderDate":{"type":"string","format":"date-time"},"totalAmount":{"type":"number"},"orderItems":{"type":"array","items":{"$ref":"#/components/schemas/OrderItem"}}}},"OrderItem":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"order":{"$ref":"#/components/schemas/Order"},"product":{"$ref":"#/components/schemas/Product"},"quantity":{"minimum":0,"type":"integer","format":"int32"},"price":{"minimum":0,"type":"number"}}}}}}